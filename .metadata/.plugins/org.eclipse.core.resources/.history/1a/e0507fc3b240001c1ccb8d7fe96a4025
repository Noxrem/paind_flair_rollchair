/*
 * myTasks.c
 *
 *  Created on: 21.10.2021
 *      Author: Noxrem
 */

#include "myTasks.h"
#include "McuRTOS.h"
#include <stdint.h>
#include <stdio.h>
#include "mySystemView.h"

static uint32_t taskParam1 = 5;
static TaskHandle_t myTaskHndl = NULL;

static void myTask(void *pv)
{
	uint32_t param = *(uint32_t*)pv;
	while(1)
	{
		__asm volatile("nop");
		vTaskDelay(pdMS_TO_TICKS(500));		// wait for 500 ms
	}
}

void MyTasks_Init(void)
{
	McuRTOS_Init();	// Initialize RTOS
	mySystemView_Init();	// Initialize system view

	/* myTask1 */
	BaseType_t res;
	res = xTaskCreate(myTask, "myTask1", 400/sizeof(StackType_t), &taskParam1, tskIDLE_PRIORITY+1, &myTaskHndl);
	if(res!=pdPASS)
	{
		/* error */
		while(1){}
	}

}
